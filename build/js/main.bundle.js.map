{"version":3,"sources":["webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-photo.js","webpack://kekstagram/./source/js/addpreview.js","webpack://kekstagram/./source/js/fetch.js","webpack://kekstagram/./source/js/alerts.js","webpack://kekstagram/./source/js/effects.js","webpack://kekstagram/./source/js/editor.js","webpack://kekstagram/./source/js/validation.js","webpack://kekstagram/./source/js/main.js"],"names":["checkEsc","evt","key","bigPicture","document","querySelector","scrollOff","bigPictureClose","commentTemplate","content","commentList","commentsLoaded","commentCount","commentsLoader","commentsCount","onBigPictureCloseClick","classList","add","remove","removeEventListener","innerHTML","onBigPictureEscKeyDown","renderComments","comments","length","slice","textContent","commentsListFragment","createDocumentFragment","forEach","comment","appendChild","commentSimilar","cloneNode","src","avatar","alt","name","message","renderComment","addEventListener","once","pictureTemplate","picturesList","renderPhotos","photos","picturesListFragment","photo","picture","photoPreview","url","likes","preventDefault","description","show","renderPhoto","Urls","GET","POST","request","onSuccess","onError","method","data","fetch","body","then","response","json","catch","main","errorTemplate","errorFragment","successTemplate","successFragment","removeEscapeAlert","className","removeAllert","onErrorEscKeydown","onSuccessEscKeydown","type","showError","text","button","errorElement","errorButton","target","contains","effectRadioGroup","effectLevel","effectLevelSlider","uploadPreviewImg","effectLevelValue","lastClass","effects","none","chrome","parseInt","value","sepia","marvin","Math","floor","phobos","heat","noUiSlider","set","currentClass","style","filter","replace","create","range","min","max","start","connect","on","round","get","uploadModal","uploadInput","uploadModalClose","resetSettings","onEditorFormEscapeKeydown","closeModal","inputHashtag","border","uploadForm","reset","buttonPlus","buttonMinus","scaleValue","imagePreview","scale","transform","successElement","showSuccess","FormData","inputComment","setCustomValidity","inputText","toLowerCase","trim","inputArray","split","some","item","indexOf","i","arr","checkValidity","onEscapeDown","stopPropagation","filters","j","temp","random","shuffleArray","sort","a","b","onFilterClick","cb","lastTimeout","args","window","clearTimeout","setTimeout","images","querySelectorAll","element","removePhotos","id","debounce"],"mappings":"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","file":"main.bundle.js","sourcesContent":["// ESCAPE\nconst Keys = {\n  ESC: 'Esc',\n  ESCAPE: 'Escape',\n}\n\nconst checkEsc = (evt) => {\n  return evt.key === Keys.ESC || evt.key === Keys.ESCAPE;\n}\n\n// перемешиваем массив\nconst shuffleArray = (arr) => {\n  let j, temp;\n  for (let i = arr.length - 1; i > 0; i--) {\n    j = Math.floor(Math.random() * (i + 1));\n    temp = arr[j];\n    arr[j] = arr[i];\n    arr[i] = temp;\n  }\n  return arr;\n}\n\n// таймаут запроса\nconst DEBOUNCE_INTERVAL = 500\n\nconst debounce = (cb) => {\n  let lastTimeout = null;\n\n  return (...args) => {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = window.setTimeout(() => {\n      cb(...args);\n    }, DEBOUNCE_INTERVAL);\n  };\n};\n\nexport { checkEsc, shuffleArray, debounce };\n","import { checkEsc } from './util.js';\n\nconst COMMENTS_LOAD_STEP = 5;\n\nconst bigPicture = document.querySelector('.big-picture');\nconst scrollOff = document.querySelector('body');\nconst bigPictureClose = document.querySelector('.big-picture__cancel');\nconst commentTemplate = document.querySelector('#comment').content.querySelector('.social__comment');\nconst commentList = document.querySelector('.social__comments')\n\nlet commentsLoaded = [];\n\nconst commentCount = bigPicture.querySelector('.social__comment-count');\nconst commentsLoader = bigPicture.querySelector('.comments-loader');\n\nlet commentsCount = COMMENTS_LOAD_STEP;\n\nconst onBigPictureCloseClick = () => {\n  bigPicture.classList.add('hidden');\n  scrollOff.classList.remove('modal-open');\n  bigPictureClose.removeEventListener('click', onBigPictureCloseClick);\n  commentList.innerHTML = '';\n  document.removeEventListener('keydown', onBigPictureEscKeyDown)\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n};\n\n// функция вывода комментариев\n\nconst renderComment = (comment) => {\n  const commentSimilar = commentTemplate.cloneNode(true);\n\n  commentSimilar.querySelector('.social__picture').src = comment.avatar;\n  commentSimilar.querySelector('.social__picture').alt = comment.name;\n  commentSimilar.querySelector('.social__text').textContent = comment.message;\n\n  return commentSimilar;\n};\n\nconst renderComments = (comments) => {\n\n  const onCommentsLoaderClick = () => {\n    renderComments(comments);\n  }\n\n  commentsCount = (comments.length < COMMENTS_LOAD_STEP) ? comments.length : commentsCount;\n  commentsLoaded = comments.slice(0, commentsCount);\n\n  commentList.innerHTML = '';\n\n  commentCount.textContent = `${commentsLoaded.length} из ${comments.length} комментариев`;\n\n  let commentsListFragment = document.createDocumentFragment();\n\n  commentsLoaded.forEach(comment => {\n    commentsListFragment.appendChild(renderComment(comment));\n  });\n\n  commentList.appendChild(commentsListFragment);\n\n  if (comments.length > COMMENTS_LOAD_STEP && commentsLoaded.length < comments.length) {\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click', onCommentsLoaderClick, { once: true })\n  } else {\n    commentsLoader.classList.add('hidden');\n  }\n\n  commentsCount += COMMENTS_LOAD_STEP;\n}\n\nconst onBigPictureEscKeyDown = (evt) => {\n  if (checkEsc(evt)) {\n    onBigPictureCloseClick()\n  }\n}\n\n// функция вывода большой картинки/поста\nconst show = (picture) => {\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n  scrollOff.classList.add('modal-open');\n  bigPicture.querySelector('.big-picture__img > img').src = picture.url;\n  bigPicture.querySelector('.likes-count').textContent = picture.likes;\n  bigPicture.querySelector('.social__caption').textContent = picture.description;\n\n  bigPictureClose.addEventListener('click', onBigPictureCloseClick);\n  bigPicture.classList.remove('hidden');\n\n  document.addEventListener('keydown', onBigPictureEscKeyDown)\n\n  renderComments(picture.comments.slice())\n};\n\nexport { show };\n","import { show } from './big-photo.js';\n\nconst pictureTemplate = document.querySelector('#picture').content.querySelector('.picture');\nconst picturesList = document.querySelector('.pictures');\n\nconst renderPhoto = (picture) => {\n  const photoPreview = pictureTemplate.cloneNode(true);\n\n  photoPreview.querySelector('.picture__img').src = picture.url;\n  photoPreview.querySelector('.picture__likes').textContent = picture.likes;\n  photoPreview.querySelector('.picture__comments').textContent = picture.comments.length;\n\n  photoPreview.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    show(picture);\n  });\n\n  return photoPreview;\n};\n\nconst renderPhotos = (photos) => {\n  let picturesListFragment = document.createDocumentFragment();\n\n  photos.forEach((photo) => {\n\n    picturesListFragment.appendChild(renderPhoto(photo));\n  });\n\n  picturesList.appendChild(picturesListFragment);\n};\n\nexport { renderPhotos };\n","const Urls = {\n  GET: 'https://22.javascript.pages.academy/kekstagram/data',\n  POST: 'https://22.javascript.pages.academy/kekstagram',\n}\n\nconst request = (onSuccess, onError, method, data) => {\n  fetch(Urls[method],\n    {\n      method: method,\n      body: data,\n    })\n    .then((response) => response.json())\n    .then((response) => {\n      onSuccess(response)\n    })\n    .catch(() => {\n      onError()\n    })\n}\n\nexport { request }\n","import { checkEsc } from './util.js';\n\nconst main = document.querySelector('main');\nconst errorTemplate = document.querySelector('#error').content;\nconst errorFragment = document.createDocumentFragment();\nconst successTemplate = document.querySelector('#success').content;\nconst successFragment = document.createDocumentFragment();\n\nconst removeEscapeAlert = (evt, className) => {\n  if (checkEsc(evt)) {\n    removeAllert(className);\n  }\n}\n\nconst onErrorEscKeydown = (evt) => {\n  removeEscapeAlert(evt, '.error')\n  document.removeEventListener('keydown', onErrorEscKeydown);\n}\n\nconst onSuccessEscKeydown = (evt) => {\n  removeEscapeAlert(evt, '.success')\n  document.removeEventListener('keydown', onSuccessEscKeydown);\n}\n\nconst removeAllert = (type) => {\n  document.querySelector(type).remove();\n};\n\nconst showError = (text, button) => {\n  const errorElement = errorTemplate.cloneNode(true);\n\n  errorElement.querySelector('.error__title').textContent = text;\n  errorElement.querySelector('.error__button').textContent = button;\n\n  const errorButton = errorElement.querySelector('.error__button');\n\n  errorElement.querySelector('.error').addEventListener('click', (evt) => {\n    let element = evt.target.classList;\n    if (!element.contains('error__inner')) {\n      document.removeEventListener('keydown', onErrorEscKeydown);\n      removeAllert('.error')\n    }\n  });\n\n  errorButton.addEventListener('click', () => {\n    removeAllert('.error');\n  })\n\n  document.addEventListener('keydown', onErrorEscKeydown);\n\n  errorFragment.appendChild(errorElement);\n  main.appendChild(errorFragment);\n}\n\nconst showSuccess = (text) => {\n  const successElement = successTemplate.cloneNode(true);\n\n  successElement.querySelector('.success__title').textContent = text;\n\n  successElement.querySelector('.success').addEventListener('click', (evt) => {\n    let element = evt.target.classList;\n    if (!element.contains('success__inner')) {\n      document.removeEventListener('keydown', onSuccessEscKeydown);\n      removeAllert('.success')\n    }\n  });\n\n  document.addEventListener('keydown', onSuccessEscKeydown);\n\n  successFragment.appendChild(successElement);\n  main.appendChild(successFragment);\n}\n\nexport { showError, showSuccess };\n","/* global noUiSlider:readonly */\n\nconst DEFAULT_EFFECT_LEVEL = 100;\n\nconst Slider = {\n  MAX: 100,\n  MIN: 0,\n  STEP: 1,\n}\n\nconst effectRadioGroup = document.querySelector('.img-upload__effects');\nconst effectLevel = document.querySelector('.img-upload__effect-level');\nconst effectLevelSlider = document.querySelector('.effect-level__slider');\nconst uploadPreviewImg = document.querySelector('.img-upload__preview > img');\nconst effectLevelValue = document.querySelector('.effect-level__value');\n\neffectLevel.classList.add('visually-hidden')\n\nlet lastClass = '';\n\nconst effects = {\n  none: () => {\n    effectLevel.classList.add('visually-hidden')\n    return 'none';\n  },\n  chrome: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `grayscale(${parseInt(effectLevelValue.value, 10) * 0.01})`;\n  },\n  sepia: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `sepia(${parseInt(effectLevelValue.value, 10) * 0.01})`;\n  },\n  marvin: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `invert(${Math.floor(effectLevelValue.value)}%)`;\n  },\n  phobos: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `blur(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01}px)`;\n  },\n  heat: () => {\n    effectLevel.classList.remove('visually-hidden')\n    return `brightness(${(parseInt(effectLevelValue.value, 10) * 3) * 0.01})`;\n  },\n}\n\nconst onEffectRadioGroupClick = (evt) => {\n  if (evt.target.classList.contains('effects__preview')) {\n    if (lastClass !== '') {\n      uploadPreviewImg.classList.remove(lastClass);\n    }\n    effectLevelSlider.noUiSlider.set(DEFAULT_EFFECT_LEVEL);\n    let currentClass = evt.target.classList[1];\n    lastClass = currentClass;\n\n    uploadPreviewImg.classList.add(currentClass);\n    uploadPreviewImg.style.filter = effects[currentClass.replace('effects__preview--', '')]();\n  }\n};\n\neffectRadioGroup.addEventListener('click', onEffectRadioGroupClick)\n\nnoUiSlider.create(effectLevelSlider, {\n  range: {\n    min: Slider.MIN,\n    max: Slider.MAX,\n  },\n  start: Slider.MAX,\n  connect: 'lower',\n});\n\neffectLevelSlider.noUiSlider.on('change', () => {\n  effectLevelValue.value = Math.round(effectLevelSlider.noUiSlider.get());\n\n  uploadPreviewImg.style.filter = effects[lastClass.replace('effects__preview--', '')]();\n});\n\nconst setDefaultLevel = () => {\n  effectLevelSlider.noUiSlider.set(DEFAULT_EFFECT_LEVEL);\n  effectLevelValue.value = DEFAULT_EFFECT_LEVEL;\n  effectLevel.classList.add('visually-hidden');\n  uploadPreviewImg.style.filter = null;\n  if (lastClass) {\n    uploadPreviewImg.classList.remove(lastClass);\n  }\n}\n\nexport { setDefaultLevel }\n","import { request } from './fetch.js';\nimport { showError, showSuccess } from './alerts.js';\nimport { checkEsc } from './util.js';\nimport { setDefaultLevel } from './effects.js';\n\n\nconst Scale = {\n  MAX: 100,\n  MIN: 25,\n  STEP: 25,\n}\n\nconst scrollOff = document.querySelector('body');\nconst uploadModal = document.querySelector('.img-upload__overlay');\nconst uploadInput = document.querySelector('#upload-file');\nconst uploadModalClose = document.querySelector('#upload-cancel')\n\n// открываем окно фильтров после загрузки файла\nuploadInput.addEventListener('change', () => {\n  resetSettings();\n  uploadModal.classList.remove('hidden');\n  scrollOff.classList.add('modal-open');\n  document.addEventListener('keydown', onEditorFormEscapeKeydown);\n\n})\n\n// закрытие окна\nconst closeModal = () => {\n  uploadModal.classList.add('hidden');\n  scrollOff.classList.remove('modal-open');\n  inputHashtag.style.border = 'none';\n  uploadInput.value = '';\n  uploadForm.reset();\n  setDefaultLevel();\n  document.removeEventListener('keydown', onEditorFormEscapeKeydown);\n}\n\nuploadModalClose.addEventListener('click', () => {\n  closeModal();\n})\n\nconst onEditorFormEscapeKeydown = (evt) => {\n  if (checkEsc(evt)) {\n    closeModal();\n  }\n}\n\n\n\n// зум картинки\nconst buttonPlus = uploadModal.querySelector('.scale__control--bigger');\nconst buttonMinus = uploadModal.querySelector('.scale__control--smaller');\nconst scaleValue = uploadModal.querySelector('.scale__control--value');\nconst imagePreview = uploadModal.querySelector('.img-upload__preview > img');\nlet inputHashtag = uploadModal.querySelector('.text__hashtags');\n\nconst resetSettings = () => {\n  imagePreview.style = 'transform: scale(1.00)'\n  scaleValue.value = '100%';\n}\n\nbuttonPlus.addEventListener('click', () => {\n  let scale = parseInt(scaleValue.value, 10) + Scale.STEP;\n\n  if (scale >= Scale.MAX) {\n    scale = Scale.MAX;\n  }\n\n  scaleValue.value = scale + '%';\n  scale = scale / 100;\n  imagePreview.style.transform = 'scale(' + scale + ')';\n})\n\nbuttonMinus.addEventListener('click', () => {\n  let scale = parseInt(scaleValue.value, 10) - Scale.STEP;\n\n  if (scale <= Scale.MIN) {\n    scale = Scale.MIN;\n  }\n\n  scaleValue.value = scale + '%';\n  scale = scale / 100;\n  imagePreview.style.transform = 'scale(' + scale + ')';\n})\n\n// Отправляем фотку\nconst uploadForm = document.querySelector('.img-upload__form');\n\nconst onSuccess = () => {\n  showSuccess('Ура!')\n  closeModal();\n}\n\nconst onError = () => {\n  showError('ЧТо-то пошло не так', 'Загрузить другой файл');\n}\n\nuploadForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n\n\n  request(onSuccess, onError, 'POST', new FormData(evt.target))\n})\n\nexport { closeModal };\n","import { checkEsc } from './util.js';\n\nlet MAX_SYMBOLS = 20;\nlet MAX_HASHTAGS = 5;\nlet MAX_COMMENTLENGTH = 140;\n\nlet inputHashtag = document.querySelector('.text__hashtags');\nlet inputComment = document.querySelector('.text__description');\n\ninputComment.addEventListener('input', () => {\n  inputComment.setCustomValidity('');\n  let inputCommentText = inputComment.value;\n\n  if (inputCommentText.length > MAX_COMMENTLENGTH) {\n    inputComment.setCustomValidity('Максимум 140 символов');\n  }\n})\n\ninputHashtag.addEventListener('input', () => {\n  inputHashtag.setCustomValidity('');\n  inputHashtag.style.border = 'none';\n\n  let inputText = inputHashtag.value.toLowerCase().trim();\n\n  if (!inputText) {\n    return;\n  }\n\n  let inputArray = inputText.split(/\\s+/);\n\n  if (inputArray.length === 0) {\n    return;\n  }\n\n  const isStartNotHashtag = inputArray.some((item) => {\n    return item[0] !== '#';\n  });\n  if (isStartNotHashtag) {\n    inputHashtag.setCustomValidity('Хэш-тег начинается с символа # (решётка)');\n\n  }\n\n  const isOnlyLatticeHashtag = inputArray.some((item) => {\n    return item === '#';\n  });\n  if (isOnlyLatticeHashtag) {\n    inputHashtag.setCustomValidity('Хэш-тег не может состоять только из решетки')\n  }\n\n  const isSplitSpaceHashtag = inputArray.some((item) => {\n    return item.indexOf('#', 1) >= 1;\n  });\n  if (isSplitSpaceHashtag) {\n    inputHashtag.setCustomValidity('Хэш-теги разделяются пробелами');\n  }\n\n  const isRepeatingHashtag = inputArray.some((item, i, arr) => {\n    return arr.indexOf(item, i + 1) >= i + 1;\n  });\n  if (isRepeatingHashtag) {\n    inputHashtag.setCustomValidity('Хэш-теги не должны повторяться');\n  }\n\n  const isLongHashtag = inputArray.some((item) => {\n    return item.length > MAX_SYMBOLS;\n  });\n  if (isLongHashtag) {\n    inputHashtag.setCustomValidity('Максимальная длина хэш-тега 20 символов, включая решетку');\n  }\n  if (inputArray.length > MAX_HASHTAGS) {\n    inputHashtag.setCustomValidity('Максимум 5 хэш-тегов');\n  }\n\n  if (!inputHashtag.checkValidity()) {\n    inputHashtag.style.border = '2px solid red';\n  } else {\n    inputHashtag.style.border = 'none';\n  }\n})\n\nconst onEscapeDown = (evt) => {\n  if (checkEsc(evt)) {\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n}\n\ninputHashtag.addEventListener('keydown', onEscapeDown)\ninputComment.addEventListener('keydown', onEscapeDown)\n","import { renderPhotos } from './addpreview.js';\nimport { request } from './fetch.js';\nimport { showError } from './alerts.js';\nimport { shuffleArray, debounce } from './util.js';\nimport './editor.js';\nimport './effects.js';\nimport './validation.js';\n\nconst DEFAULT_PREVIEW_LOAD = 25;\nconst RANDOM_PREVIEW_LOAD = 10;\n\nconst filter = document.querySelector('.img-filters');\nlet photos = [];\n\nconst removeActiveClass = () => {\n  let activeFilter = document.querySelector('.img-filters__button--active');\n  activeFilter.classList.remove('img-filters__button--active');\n}\n\nconst removePhotos = () => {\n  const images = document.querySelectorAll('.picture');\n  if (images) {\n    images.forEach(element => {\n      element.remove();\n    });\n  }\n}\n\nconst filters = {\n  'filter-default': () => {\n    renderPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD))\n  },\n  'filter-random': () => {\n    renderPhotos(shuffleArray(photos.slice()).slice(0, RANDOM_PREVIEW_LOAD));\n\n  },\n  'filter-discussed': () => {\n    renderPhotos(photos.slice().sort((a, b) => {\n      return b.comments.length - a.comments.length;\n    }))\n  },\n}\n\nconst onSuccess = (data) => {\n  filter.classList.remove('img-filters--inactive');\n  photos = data.slice()\n  renderPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD))\n}\n\nconst onError = () => {\n  showError('Ошибка загрузки, попробуйте еще раз', 'Закрыть')\n}\n\nrequest(onSuccess, onError, 'GET')\n\nconst onFilterClick = debounce((evt) => {\n  if (evt.target.classList.contains('img-filters__button')) {\n    removeActiveClass();\n    removePhotos();\n    evt.target.classList.add('img-filters__button--active')\n    filters[evt.target.id]()\n  }\n})\n\nfilter.addEventListener('click', onFilterClick)\n"],"sourceRoot":""}